!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):e.mp=r()}(this,function(){"use strict";var e={prefix:"mp_client__"},t=function(){function n(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}}(),r=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)},n=function(){function r(e){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),this.key=e}return t(r,[{key:"set",value:function(e){wx.setStorageSync(this.key,e)}},{key:"get",value:function(){return wx.getStorageSync(this.key)||""}},{key:"remove",value:function(){wx.removeStorageSync(this.key)}},{key:"clear",value:function(){wx.clearStorageSync()}}]),r}(),a=Object.prototype.hasOwnProperty,i=function(){for(var e=[],r=0;r<256;++r)e.push("%"+((r<16?"0":"")+r.toString(16)).toUpperCase());return e}(),c=function(e,r){for(var t=r&&r.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(t[n]=e[n]);return t},O={arrayToObject:c,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},compact:function(e){for(var r=[{obj:{o:e},prop:"o"}],t=[],n=0;n<r.length;++n)for(var o=r[n],i=o.obj[o.prop],a=Object.keys(i),c=0;c<a.length;++c){var u=a[c],f=i[u];"object"==typeof f&&null!==f&&-1===t.indexOf(f)&&(r.push({obj:i,prop:u}),t.push(f))}return function(e){for(var r;e.length;){var t=e.pop();if(r=t.obj[t.prop],Array.isArray(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);t.obj[t.prop]=n}}return r}(r)},decode:function(r){try{return decodeURIComponent(r.replace(/\+/g," "))}catch(e){return r}},encode:function(e){if(0===e.length)return e;for(var r="string"==typeof e?e:String(e),t="",n=0;n<r.length;++n){var o=r.charCodeAt(n);45===o||46===o||95===o||126===o||48<=o&&o<=57||65<=o&&o<=90||97<=o&&o<=122?t+=r.charAt(n):o<128?t+=i[o]:o<2048?t+=i[192|o>>6]+i[128|63&o]:o<55296||57344<=o?t+=i[224|o>>12]+i[128|o>>6&63]+i[128|63&o]:(n+=1,o=65536+((1023&o)<<10|1023&r.charCodeAt(n)),t+=i[240|o>>18]+i[128|o>>12&63]+i[128|o>>6&63]+i[128|63&o])}return t},isBuffer:function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function n(t,o,i){if(!o)return t;if("object"!=typeof o){if(Array.isArray(t))t.push(o);else{if("object"!=typeof t)return[t,o];(i.plainObjects||i.allowPrototypes||!a.call(Object.prototype,o))&&(t[o]=!0)}return t}if("object"!=typeof t)return[t].concat(o);var e=t;return Array.isArray(t)&&!Array.isArray(o)&&(e=c(t,i)),Array.isArray(t)&&Array.isArray(o)?(o.forEach(function(e,r){a.call(t,r)?t[r]&&"object"==typeof t[r]?t[r]=n(t[r],e,i):t.push(e):t[r]=e}),t):Object.keys(o).reduce(function(e,r){var t=o[r];return a.call(e,r)?e[r]=n(e[r],t,i):e[r]=t,e},e)}},o=String.prototype.replace,u=/%20/g,k={default:"RFC3986",formatters:{RFC1738:function(e){return o.call(e,u,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},S={brackets:function(e){return e+"[]"},indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},f=Date.prototype.toISOString,C={delimiter:"&",encode:!0,encoder:O.encode,encodeValuesOnly:!1,serializeDate:function(e){return f.call(e)},skipNulls:!1,strictNullHandling:!1},x=function e(r,t,n,o,i,a,c,u,f,l,s,p){var y=r;if("function"==typeof c)y=c(t,y);else if(y instanceof Date)y=l(y);else if(null===y){if(o)return a&&!p?a(t,C.encoder):t;y=""}if("string"==typeof y||"number"==typeof y||"boolean"==typeof y||O.isBuffer(y))return a?[s(p?t:a(t,C.encoder))+"="+s(a(y,C.encoder))]:[s(t)+"="+s(String(y))];var d,g=[];if(void 0===y)return g;if(Array.isArray(c))d=c;else{var h=Object.keys(y);d=u?h.sort(u):h}for(var v=0;v<d.length;++v){var b=d[v];i&&null===y[b]||(g=Array.isArray(y)?g.concat(e(y[b],n(t,b),n,o,i,a,c,u,f,l,s,p)):g.concat(e(y[b],t+(f?"."+b:"["+b+"]"),n,o,i,a,c,u,f,l,s,p)))}return g},l=(Object.prototype.hasOwnProperty,function(e,r){var t=e,n=r?O.assign({},r):{};if(null!==n.encoder&&void 0!==n.encoder&&"function"!=typeof n.encoder)throw new TypeError("Encoder has to be a function.");var o=void 0===n.delimiter?C.delimiter:n.delimiter,i="boolean"==typeof n.strictNullHandling?n.strictNullHandling:C.strictNullHandling,a="boolean"==typeof n.skipNulls?n.skipNulls:C.skipNulls,c="boolean"==typeof n.encode?n.encode:C.encode,u="function"==typeof n.encoder?n.encoder:C.encoder,f="function"==typeof n.sort?n.sort:null,l=void 0!==n.allowDots&&n.allowDots,s="function"==typeof n.serializeDate?n.serializeDate:C.serializeDate,p="boolean"==typeof n.encodeValuesOnly?n.encodeValuesOnly:C.encodeValuesOnly;if(void 0===n.format)n.format=k.default;else if(!Object.prototype.hasOwnProperty.call(k.formatters,n.format))throw new TypeError("Unknown format option provided.");var y,d,g=k.formatters[n.format];"function"==typeof n.filter?t=(d=n.filter)("",t):Array.isArray(n.filter)&&(y=d=n.filter);var h,v=[];if("object"!=typeof t||null===t)return"";h=n.arrayFormat in S?n.arrayFormat:"indices"in n?n.indices?"indices":"repeat":"indices";var b=S[h];y||(y=Object.keys(t)),f&&y.sort(f);for(var m=0;m<y.length;++m){var j=y[m];a&&null===t[j]||(v=v.concat(x(t[j],j,b,i,a,c?u:null,d,f,l,s,g,p)))}var w=v.join(o),A=!0===n.addQueryPrefix?"?":"";return 0<w.length?A+w:""}),s={toURL:function(e){var r=e.route,t=e.options,n=void 0===t?{}:t;return"/"+r+(Object.keys(n).length?"?"+l(n):"")}},p=new n(e.prefix+"pages");return{wx:wx,utils:{consts:e,Storage:n,currentPages:{whiteList:[],addWhiteList:function(e){this.whiteList=[].concat(r(this.whiteList),r(e))},storePages:function(){var e=this,r=getCurrentPages(),t=r[r.length-1],n=t.route,o=t.options,i=p.get()||[];e.whiteList.includes(n)||0<i.length&&i[i.length-1].route===n||(5<=i.length&&i.shift(),i.push({route:n,options:o,url:s.toURL({route:n,options:o})}),p.set(i))},getPages:function(){return p.get()},clearPages:function(){p.clear()}},url:{encode:function(e){return encodeURIComponent(e)},decode:function(e){return decodeURIComponent(e)}},page:s},helpers:{sleep:function(r){return new Promise(function(e){setTimeout(e,r)})}}}});
//# sourceMappingURL=index.umd.js.map
