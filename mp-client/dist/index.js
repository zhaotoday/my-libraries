"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var qs=_interopDefault(require("qs")),dayjs=_interopDefault(require("dayjs")),prefix="mp_client__",consts={prefix:prefix},classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},Storage=function(){function t(e){classCallCheck(this,t),this.key=e}return createClass(t,[{key:"set",value:function(e){wx.setStorageSync(this.key,e)}},{key:"get",value:function(){return wx.getStorageSync(this.key)||""}},{key:"remove",value:function(){wx.removeStorageSync(this.key)}},{key:"clear",value:function(){wx.clearStorageSync()}}]),t}(),page={toURL:function(e){var t=e.route,r=e.options,n=void 0===r?{}:r;return"/"+t+(Object.keys(n).length?"?"+qs.stringify(n):"")}},storage=new Storage(consts.prefix+"pages"),MAX_PAGES=5,currentPages={whiteList:[],addWhiteList:function(e){this.whiteList=[].concat(toConsumableArray(this.whiteList),toConsumableArray(e))},storePages:function(){var e=this,t=getCurrentPages(),r=t[t.length-1],n=r.route,o=r.options,s=storage.get()||[];e.whiteList.includes(n)||0<s.length&&s[s.length-1].route===n||(s.length>=MAX_PAGES&&s.shift(),s.push({route:n,options:o,url:page.toURL({route:n,options:o})}),storage.set(s))},getPages:function(){return storage.get()},clearPages:function(){storage.remove()}},url={encode:function(e){return encodeURIComponent(e)},decode:function(e){return decodeURIComponent(e)}},DATE_FORMATTER="YYYY-MM-DD",time={getDate:function(e){return dayjs(e).format(DATE_FORMATTER)}},utils={consts:consts,Storage:Storage,currentPages:currentPages,url:url,page:page,time:time},helpers={sleep:function(t){return new Promise(function(e){setTimeout(e,t)})}},index={wx:wx,utils:utils,helpers:helpers};module.exports=index;
//# sourceMappingURL=index.js.map
