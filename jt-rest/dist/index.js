"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var axios=_interopDefault(require("axios")),classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),REST=function(){function e(){var n=this;classCallCheck(this,e),this.baseURL="",this.version="",this.path="",this.headers={};["GET","POST","PATCH","PUT","DELETE"].forEach(function(t){n[t]=function(e){return n.request(t,e)}})}return createClass(e,[{key:"request",value:function(){var e=this,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"GET",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.id,i=void 0===n?"":n,r=t.query,s=void 0===r?null:r,o=t.body,u=void 0===o?null:o,h=this.version?"/"+this.version+"/"+this.path:"/"+this.path;return i&&(h=h+"/"+i),s&&(h=""+h+this.toURL(s)),"undefined"!=typeof wx?new Promise(function(t,n){wx.request({url:e.baseURL+h,header:e.headers,method:a,data:u,success:function(e){"2"===(e.statusCode+"").charAt(0)?t(e):n(e)},fail:n})}):axios({baseURL:this.baseURL,headers:this.headers,method:a,url:h,data:u})}},{key:"toURL",value:function(t){return t&&Object.keys(t).length?"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&"):""}},{key:"addPath",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return this.path=this.path+"/"+e,this}},{key:"addHeaders",value:function(e){return Object.assign(this.headers,e),this}},{key:"replace",value:function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(n).forEach(function(e){t.path=t.path.replace(new RegExp("{"+e+"}","img"),n[e])}),this}}]),e}();module.exports=REST;
//# sourceMappingURL=index.js.map
