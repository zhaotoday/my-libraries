"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var axios=_interopDefault(require("axios")),classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),REST=function(){function e(){var n=this;classCallCheck(this,e),this.baseUrl="",this.version="",this.path="",this.headers={};["GET","POST","PATCH","PUT","DELETE"].forEach(function(t){n[t]=function(e){return n.request(t,e)}})}return createClass(e,[{key:"request",value:function(){var e=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"GET",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.id,r=void 0===n?"":n,a=t.query,n=void 0===a?null:a,a=t.body,s=void 0===a?null:a,t=t.timeout,t=void 0===t?5e3:t,o=this.version?"/"+this.version+"/"+this.path:"/"+this.path;return r&&(o=o+"/"+r),n&&(o=""+o+this.toURL(n)),"undefined"!=typeof wx&&wx.request?new Promise(function(t,n){wx.request({url:e.baseUrl+o,header:e.headers,method:i,data:s,success:function(e){("2"===(e.statusCode+"").charAt(0)?t:n)(e)},fail:n})}):axios({baseUrl:this.baseUrl,headers:this.headers,method:i,timeout:t,url:o,data:s})}},{key:"toURL",value:function(t){return t&&Object.keys(t).length?"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&"):""}},{key:"addPath",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"/";return this.path=this.path?""+this.path+t+e:e,this}},{key:"addHeaders",value:function(e){return Object.assign(this.headers,e),this}},{key:"replace",value:function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(n).forEach(function(e){t.path=t.path.replace(new RegExp("{"+e+"}","img"),n[e])}),this}}]),e}();module.exports=REST;
//# sourceMappingURL=index.js.map
