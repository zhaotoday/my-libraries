"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var axios=_interopDefault(require("axios")),classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),REST=function(){function e(){var n=this;classCallCheck(this,e),this.baseURL="",this.version="",this.path="",this.headers={};["GET","POST","PATCH","PUT","DELETE"].forEach(function(t){n[t]=function(e){return n.request(t,e)}})}return createClass(e,[{key:"request",value:function(e,t){var i=this,a=0<arguments.length&&void 0!==e?e:"GET",n=1<arguments.length&&void 0!==t?t:{},r=n.id,s=void 0===r?"":r,o=n.query,u=void 0===o?null:o,h=n.body,c=void 0===h?null:h,l=n.timeout,f=void 0===l?5e3:l,d=this.version?"/"+this.version+"/"+this.path:"/"+this.path;return s&&(d=d+"/"+s),u&&(d=""+d+this.toURL(u)),"undefined"!=typeof wx&&wx.request?new Promise(function(t,n){wx.request({url:i.baseURL+d,header:i.headers,method:a,data:c,success:function(e){("2"===(e.statusCode+"").charAt(0)?t:n)(e)},fail:n})}):axios({baseURL:this.baseURL,headers:this.headers,method:a,timeout:f,url:d,data:c})}},{key:"toURL",value:function(t){return t&&Object.keys(t).length?"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&"):""}},{key:"addPath",value:function(e){var t=0<arguments.length&&void 0!==e?e:"";return this.path=this.path?this.path+"/"+t:t,this}},{key:"addHeaders",value:function(e){return Object.assign(this.headers,e),this}},{key:"replace",value:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:{};return Object.keys(n).forEach(function(e){t.path=t.path.replace(new RegExp("{"+e+"}","img"),n[e])}),this}}]),e}();module.exports=REST;
//# sourceMappingURL=index.js.map
